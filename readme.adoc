= KunDict
:toc:
:icon: font
gk07 <gk_520@hotmail.com>
v1.0, 2020-09-04
// v{revnumber}, {docdate}
:library: Asciidoctor
ifdef::asciidoctor[]
:source-highlighter: coderay
endif::asciidoctor[]
:idprefix:
:stylesheet: asciidoc.css
:imagesdir: images
:includesdir: includes
//:title-logo-image: image:logo.png[pdfwidth=3.00in,align=center]
//:backend: docbook45
//:backend: html5
//:doctype: book
//:sectids!:
:plus: &#43;

// refs
:url-github: https://github.com/Kunkgg
//:url-blog: http-to-my-blog

["plantuml"]
----
class App {
    - {static} Database db;
}

abstract class Dict {
     - String name;
     - String shortName;
     - String description;
     - DictType type;

     + String getName()
     + String getDescription()
     + DictType getType()
     + void setName(String name)
     + void setDescription(String description)
     + void setType(DictType type)

    {abstract} Word query(String wordSpell);
}

enum  DictType {
    Online
    Local
}

abstract class OnlineDict {
     - DictType type = this.setType(DictType.Online);
}

abstract class LocalDict {
    - Instant atime;
    - Instant mtime;
    - {static} Database db;
    - String shortName;

    + LocalDict(String name, String description, String shortname)

    + Instant getAtime()
    + Instant getMtime()
    + void updateAtime()
    + void updateMtime()

    + void initializeTables()
    + void dropTables()
    + boolean hasTables()

    + void queryWord(String wordSpell)
    + void addWord(Word word)
    + void deleteWord(Word word)
    + void updateWord(Word word)
    + int size()

    Word queryWord(String wordSpell);
    void addWord(Word word);
    void deleteWord(String wordSpell);
    void updateWord(Word word);
    int size();
    Word random();

    {abstract} Boolean generate();
}

class MITDict {
    Boolean add(Word word) ;
    Boolean delete(String wordSpell);
    Word query(String wordSpell);
    Word random();
    Boolean update(Word word);
    int size();
    Boolean generate();
}

class CollinsOnlineDict {
    Word query(String wordSpell);
}

class Word {
    - String spell;
    - String[] forms;
    - String frequency;
    - Pronounce pronounce;
    - SenseEntry[] senseEntrylist;
    - LocalDateTime lastModify;

    + String toString();
    + String getSpell();
    + Pronounce getPronounce();
    + String getfrequency();
    + String[] getforms();
    + SenseEntry[] getSenseEntry();
    + void setSpell();
    + void setPronounce();
    + void setfrequency();
    + void setforms();
    + void setSenseEntry();
}

class Pronounce {
    + String soundmark;
    + String[] sound;
}

class SenseEntry {
    + String wordClass;
    + String sense;
    + String[] examples;
}

class Formatter {
    + {static} String toAnki(Word word)
}

class Printer {
    + {static} void toTerminal(String formattedWord)
}

class Extractor {
    - String input;
    - String[] ability;

    + {static} Word collins()
    + {static} Word getWord(String text)
    + {static} String[] getAbility()
    + {static} Boolean ifCan(String ability)
}

class Request {
    - String proxyHost
    - int proxyPort
    - HttpClient client
    - HttpRequest.Builder requestBuilder
    - HttpResponse.BodyHandler bodyHandler
    - String url

    + HttpResponse<String> get()
    + HttpResponse<String> head()
    + HttpResponse<String> post()
    + HttpResponse<String> delete()
    + HttpResponse<String> put()
    + HttpResponse<String> option()

    + void setUrl()
    + void setClient()
    + void setRequestBuilder()
    + void setBodyHandler()
    + void setProxyHost()
    + void setProxyPort()

    + String getProxyHost()
    + int getProxyPort()
    + HttpClient getClient()
    + HttpRequest.Builder getRequestBuilder()
    + HttpResponse.BodyHandler getBodyHandler()
    + String getUrl()
}

class Database

Dict <|.. LocalDict
Dict <|.. OnlineDict
LocalDict <|.. MITDict
OnlineDict <|.. CollinsOnlineDict
Word *-- Pronounce
Word *-- SenseEntry : sensenEntrylist
MITDict o-- Word
Database -- MITDict
CollinsOnlineDict <-- Request
Request <-- Extractor
Extractor <-- Word
Word <-- Formatter
Formatter <-- Printer
----

// Dict o.. Word
// LocaleDict o.. Word
